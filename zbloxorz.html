<!DOCTYPE html>
<html>
<body>
    <script src='/everypage.js'></script>
<style>
html, body, .full {
width: 100%;
height: 100%;
}
</style>

    <form action="">
  <label for="myfile">Select a file:</label>
  <input type="file" id="myfile" name="myfile"><br><br>
  <input type="submit" value="Submit">
</form>
    
<script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
<object data='' class='full' id="myObject"></object>

<script>
  const fileInput = document.getElementById('myfile');
  const objectTag = document.getElementById('myObject');

  fileInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = (event) => {
      // Upload the file to Replit Object Storage
      fetch('/upload', {
        method: 'POST',
        body: file
      })
      .then(response => response.json())
      .then(data => {
        // Set the data attribute of the object tag to the URL
        objectTag.data = data.url; 
      });
    };

    reader.readAsDataURL(file);
  });
</script>

</body>
</html>
